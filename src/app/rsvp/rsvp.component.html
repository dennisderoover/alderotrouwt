<aldero-page-title pageTitle="RSVP"></aldero-page-title>

<section *ngIf="showInput">
  <aldero-subtitle
    title="Répondez s-il vous plaît"
    subtitle="Laat ons hier weten of je erbij kan zijn!"
  ></aldero-subtitle>

  <form [formGroup]="form">
    <div class="first-name">
      <label for="firstName">
        Voornaam
      </label>
      <input
        #firstName
        [formControl]="form.controls.firstName"
        class="aldero-input"
        type="text"
      >
    </div>
    <div class="last-name">
      <label for="lastName">
        Achternaam
      </label>
      <input
        #lastName
        [formControl]="form.controls.lastName"
        class="aldero-input"
        type="text"
      >
    </div>
    <button
      class="aldero-button primary"
      [disabled]="form.invalid || isLoading"
      (click)="requestInvitation()"
    >
      <span *ngIf="!isLoading">Vind mijn uitnodiging</span>
      <i *ngIf="isLoading" class="fa-solid fa-spinner fa-spin"></i>
    </button>
  </form>
</section>

<!-- ANTWERP -->
<section *ngIf="showAntwerp">
  <div class="event-header">
    <aldero-subtitle
      title="Burgerlijke trouw"
      subtitle="Stadhuis Antwerpen"
    ></aldero-subtitle>
    <p class="timeslot">11u00</p>
  </div>

  <div class="selection" *ngFor="let guest of rsvpService.currentHousehold">
    <p class="bold">{{ guest.firstName }} {{ guest.lastName }}</p>
    <div class="selection-btns">
      <button
        class="aldero-button"
        [ngClass]="[guestIsComing(eActivity.ANTWERP, guest) ? 'primary' : 'secondary']"
        (click)="selectAnswer(eActivity.ANTWERP, eSelectionAnswer.COMING, guest)"
      >Ik kom</button>
      <button
        class="aldero-button"
        [ngClass]="[guestIsNotComing(eActivity.ANTWERP, guest) ? 'primary' : 'secondary']"
        (click)="selectAnswer(eActivity.ANTWERP, eSelectionAnswer.NOT_COMING, guest)"
      >Ik kom niet</button>
    </div>
  </div>

  <button
    class="aldero-button primary"
    [disabled]="!submitStepEnabled(eActivity.ANTWERP) || isLoading"
    (click)="submitAnswers(eActivity.ANTWERP)"
  >
    <span *ngIf="!isLoading">Ga verder</span>
    <i *ngIf="isLoading" class="fa-solid fa-spinner fa-spin"></i>
  </button>
</section>
<!-- END ANTWERP -->

<!-- CEREMONY -->
<section *ngIf="showCeremony">
  <div class="event-header">
    <aldero-subtitle
      title="Ceremonie en Receptie"
      subtitle="Hof Van Riemen"
    ></aldero-subtitle>
    <p class="timeslot">15u00 tot 19u00</p>
  </div>

  <div class="selection" *ngFor="let guest of rsvpService.currentHousehold">
    <p class="bold">{{ guest.firstName }} {{ guest.lastName }}</p>
    <div class="selection-btns">
      <button
        class="aldero-button"
        [ngClass]="[guestIsComing(eActivity.CEREMONY, guest) ? 'primary' : 'secondary']"
        (click)="selectAnswer(eActivity.CEREMONY, eSelectionAnswer.COMING, guest)"
      >Ik kom</button>
      <button
        class="aldero-button"
        [ngClass]="[guestIsNotComing(eActivity.CEREMONY, guest) ? 'primary' : 'secondary']"
        (click)="selectAnswer(eActivity.CEREMONY, eSelectionAnswer.NOT_COMING, guest)"
      >Ik kom niet</button>
    </div>
  </div>

  <button
    class="aldero-button primary"
    [disabled]="!submitStepEnabled(eActivity.CEREMONY) || isLoading"
    (click)="submitAnswers(eActivity.CEREMONY)"
  >
    <span *ngIf="!isLoading">Ga verder</span>
    <i *ngIf="isLoading" class="fa-solid fa-spinner fa-spin"></i>
  </button>
</section>
<!-- END ANTWERP -->

<!-- DINER -->
<section *ngIf="showDiner">
  <div class="event-header">
    <aldero-subtitle
      title="Diner"
      subtitle="Hof Van Riemen"
    ></aldero-subtitle>
    <p class="timeslot">19u00 tot 21u00</p>
  </div>

  <div class="selection" *ngFor="let guest of rsvpService.currentHousehold">
    <p class="bold">{{ guest.firstName }} {{ guest.lastName }}</p>
    <div class="selection-btns">
      <button
        class="aldero-button"
        [ngClass]="[guestIsComing(eActivity.DINER, guest) ? 'primary' : 'secondary']"
        (click)="selectAnswer(eActivity.DINER, eSelectionAnswer.COMING, guest)"
      >Ik kom</button>
      <button
        class="aldero-button"
        [ngClass]="[guestIsNotComing(eActivity.DINER, guest) ? 'primary' : 'secondary']"
        (click)="selectAnswer(eActivity.DINER, eSelectionAnswer.NOT_COMING, guest)"
      >Ik kom niet</button>
    </div>
  </div>

  <button
    class="aldero-button primary"
    [disabled]="!submitStepEnabled(eActivity.DINER) || isLoading"
    (click)="submitAnswers(eActivity.DINER)"
  >
    <span *ngIf="!isLoading">Ga verder</span>
    <i *ngIf="isLoading" class="fa-solid fa-spinner fa-spin"></i>
  </button>
</section>
<!-- END DINER -->

<!-- PARTY -->
<section *ngIf="showParty">
  <div class="event-header">
    <aldero-subtitle
      title="Party Time"
      subtitle="Hof Van Riemen"
    ></aldero-subtitle>
    <p class="timeslot">21u00</p>
  </div>

  <div class="selection" *ngFor="let guest of rsvpService.currentHousehold">
    <p class="bold">{{ guest.firstName }} {{ guest.lastName }}</p>
    <div class="selection-btns">
      <button
        class="aldero-button"
        [ngClass]="[guestIsComing(eActivity.PARTY, guest) ? 'primary' : 'secondary']"
        (click)="selectAnswer(eActivity.PARTY, eSelectionAnswer.COMING, guest)"
      >Ik kom</button>
      <button
        class="aldero-button"
        [ngClass]="[guestIsNotComing(eActivity.PARTY, guest) ? 'primary' : 'secondary']"
        (click)="selectAnswer(eActivity.PARTY, eSelectionAnswer.NOT_COMING, guest)"
      >Ik kom niet</button>
    </div>
  </div>

  <button
    class="aldero-button primary"
    [disabled]="!submitStepEnabled(eActivity.PARTY) || isLoading"
    (click)="submitAnswers(eActivity.PARTY)"
  >
    <span *ngIf="!isLoading">Ga verder</span>
    <i *ngIf="isLoading" class="fa-solid fa-spinner fa-spin"></i>
  </button>
</section>
<!-- END PARTY -->

<section *ngIf="showEnd">
  <aldero-subtitle
    title="Bedankt voor het invullen!"
    subtitle="We kijken uit naar je komst."
  ></aldero-subtitle>

  <button
    class="aldero-button primary"
    [routerLink]="['/locatie']"
  >
    Waar is dat feestje?
  </button>
</section>
